//
// project : https://github.com/unosquare/embedio
//

using EmbedIO;
using EmbedIO.Routing;
using EmbedIO.WebApi;
using Swan.Logging;

namespace Sample {

    class Program {
        static void Main(string[] args) {

            Console.WriteLine("embedio started at http://127.0.0.1:8080/api/test/hello/api/test/hello");
            Logger.NoLogging();

            var server = new WebServer(o => o
                    .WithUrlPrefix("http://127.0.0.1:8080/api/test/hello/")
                    .WithMode(HttpListenerMode.EmbedIO))
                    .WithWebApi("/api", m => m
                    .WithController<PeopleController>());
            server.RunAsync();
            Console.ReadKey(true);
        }
    }

    public class PeopleController : WebApiController {
        [Route(HttpVerbs.Get, "/test/hello")]
        public object GetAllPeople() {
            return new { message = "Hello World !" };
        }
    }

}